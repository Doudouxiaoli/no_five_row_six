<!DOCTYPE html>
#@admin_layout()

#define title()
<title>五排六号-综艺>列表</title>
#end

#define css()
<style>
    .cus_table th, .cus_table td {
        text-align: center;
    }

    table td {
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
    }

</style>
#end

#define main()
<div class="wrapper">
    #include("../../../header.html", navId="nav_molivideo",subNavId="nav_variety")
    <div class="content-wrapper">
        <section class="content-header">
            <h1>综艺列表</h1>
        </section>
        <section class="content">
            <div class="col-xs-12">
                <div class="box">
                    <div class="box-body">
                        <div class="box-header">
                            <div class="col-sm-1 col-md-1">
                                <a class="btn btn-success" href="admin/molivideo/variety/addUI?workId=#(workId)">新增</a>
                            </div>
                            <div class="col-sm-10 col-md-10" style="margin-left:10px">
                                <form class="form-inline" name="searchForm" id="searchForm"
                                      style="margin-bottom: 15px;">
                                    <input type="hidden" id="workId" name="workId" value="#(workId)">
                                    <input type="hidden" id="current" name="current" value="#(page.getCurrent())"/>
                                    <input type="hidden" id="size" name="size" value="#(page.getSize())"/>
                                    <div class="form-group" style="margin-right: 50px">
                                        <input type="text" class="form-control" id="keyword" name="keyword"
                                               placeholder=作品名称
                                               value="#(keyword)"/>
                                    </div>
                                    <input type="radio" name="state" value="1"
                                           #if(state== 1)
                                           checked
                                           #end
                                    />激活态
                                    <input style="margin-left: 10px;" type="radio" name="state" value="0"
                                           #if(state== 0)
                                           checked
                                           #end
                                    />已删除
                                    <div class="form-group" style="margin-left: 30px">
                                        <label>播出日期:</label>
                                        <div class="input-group date" style="width:40%;">
                                            <div class="input-group-addon">
                                                <i class="fa fa-calendar"></i>
                                            </div>
                                            <input type="text" class="form-control pull-right searchDate"
                                                   id="datepicker"
                                                   name="startDate" value="#(startDate)" readonly="true"/>
                                        </div>
                                        &nbsp;~&nbsp;
                                        <div class="input-group date" style="width:40%;">
                                            <div class="input-group-addon">
                                                <i class="fa fa-calendar"></i>
                                            </div>
                                            <input type="text" class="form-control pull-right searchDate"
                                                   id="datepicker1"
                                                   name="endDate" value="#(endDate)" readonly="true"/>
                                        </div>
                                    </div>
                                    <button style="margin-left: 10px;" type="button" class="btn btn-success"
                                            id="searchBtn">搜索
                                    </button>
                                    <a class="btn btn-success"
                                       href="admin/molivideo/variety/list?workId=#(workId)">重置搜索</a>
                                    <a class="btn btn-linkedin" href="admin/molivideo/list?type=#(type)">返回至综艺列表</a>
                                </form>
                            </div>

                        </div>
                    </div>
                    <div class="box-body">
                        #if(page.records?? != null && page.total > 0)
                        <table class="table table-striped table-hover table-condensed cus_table"
                               style="table-layout: auto;">
                            <thead>
                            <tr>
                                <th>序号</th>
                                <th>当前期数</th>
                                <th>综艺名称</th>
                                <th>视频id</th>
                                <th>播出日期</th>
                                <th>创建时间</th>
                                <th>修改时间</th>
                                <th><span class="glyphicon glyphicon-cog" aria-hidden="true"></span>操作</th>
                            </tr>
                            </thead>
                            <tbody>
                            #for(variety:page.records)
                            <tr>
                                <td>#((page.size * (page.current -1)) + (for.index +1))</td>
                                <td>#(variety.fvSort??)</td>
                                <td>#(variety.fvName??)</td>
                                <td>#(variety.fvVid??)</td>
                                <td>#(longToString(variety.fvTime??,"yyyy-MM-dd"))</td>
                                <td>#(longToString(variety.fvCreateTime??,"yyyy-MM-dd HH:mm"))</td>
                                <td>#(longToString(variety.fvUpdateTime??,"yyyy-MM-dd HH:mm"))</td>
                                <td>
                                    #if(variety.fvIsValid?? == 1)
                                    <a type="button" class="btn btn-primary"
                                       href="/admin/molivideo/variety/editUI?id=#(variety.fvId)">修改</a>
                                    <a type="button" class="btn btn-primary"
                                       href="/admin/molivideo/variety/del?id=#(variety.fvId)">删除</a>
                                    #else if(variety.fvIsValid == 0)
                                    <a type="button" class="btn btn-primary"
                                       href="/admin/molivideo/variety/reBack?id=#(variety.fvId)">恢复</a>
                                    #end
                                </td>
                            </tr>
                            #end
                            </tbody>
                        </table>
                        #include("../../../pojoPageInfo.html", act="admin/molivideo/list?workId=#(workId)",
                        formName="searchForm")
                        #else if (page.records == null || page.total <= 0)
                        暂无数据！
                        #end
                    </div>
                </div>
            </div>
        </section>
    </div>
</div>

<script type="text/javascript">
    $(document).ready(function () {

        //检索
        $("#searchBtn").bind("click", function () {
            var form = document.forms[0];
            var workId = $("#workId").val();
            form.action = "admin/molivideo/variety/list?workId=" + workId;
            $("#page").val(1);
            form.submit();
        });

        //回车提交表单
        $("#keyword").keydown(function (event) {
            if (event.keyCode == 13) {
                $("#searchBtn").click();
            }
        });

    });
</script>
#end

